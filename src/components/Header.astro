---
import HeroButton from "../icons/HeroButton.astro";
import IconMoon from "../icons/IconMoon.astro";
import IconSun from "../icons/IconSun.astro";

const { class: className, id } = Astro.props;
---

<header
  id={id}
  data-section={id}
  class={` ${className} shadow-md inset-x-0 top-0 z-50 md:relative md:shadow-none md:bg-transparent  pt-8 pb-4  dark:shadow-none `}
>
  <!-- Contenedor principal del menú de navegación -->
  <nav class="wrapper h-20 flex items-center justify-between">
    <a href="./" class="md:w-1/3 max-w-[178px]">
      <img src="/src/assets/logo.png" alt="logo" class="w-full" />
    </a>

    <input type="checkbox" id="menu" class="peer hidden" />

    <label
      for="menu"
      class="bg-open-menu size-[51px] bg-cover bg-center cursor-pointer peer-checked:hidden md:hidden dark:text-day-main text-day-main"
    ></label>

    <div
      class="fixed inset-y-0 right-0 w-[406px] md:w-auto translate-x-full peer-checked:translate-x-0 transition-transform duration-300 z-40 md:static md:translate-x-0"
    >
      <ul
        class="absolute right-0 top-8 p-4 bg-day-main w-[60%] rounded-s-2xl h-max text-center grid gap-11 font-bold text-sm text-white
    md:w-max md:static md:bg-transparent md:p-0 md:grid-flow-col md:flex md:items-center"
      >
        <li>
          <div class="flex justify-between items-center px-3 md:hidden">
            <HeroButton
              aria-label="btn-theme"
              id="toggle-theme"
              class="h-auto flex items-center bg-day-main border-2 p-1 w-auto rounded-full hover:bg-day-secondary hover:dark:bg-day-secondary transition-transform hover:rotate-180 dark:rotate-0 duration-100 ease-in-out"
            >
              <IconSun class="size-6 dark:hidden" />
              <IconMoon class="size-6 hidden dark:inline" />
            </HeroButton>

            <label
              for="menu"
              class="bg-close-menu size-10 bg-cover bg-center bg-day-main cursor-pointer duration-300 hover:rotate-90 z-50 md:hidden dark:text-day-main text-day-main"
            >
            </label>
          </div>
        </li>
        <li><a href="#">About Us</a></li>
        <li><a href="#">Our Rooms</a></li>
        <li><a href="#">Purr Care</a></li>
        <li><a href="#">Testimonial</a></li>
        <li class="hidden md:block">
          <HeroButton
            aria-label="btn-theme"
            id="toggle-themeMobile"
            class="h-auto flex items-center bg-day-main border-2 p-1 w-auto rounded-full hover:bg-day-secondary hover:dark:bg-day-secondary transition-transform hover:rotate-180 dark:rotate-0 duration-100 ease-in-out"
          >
            <IconSun class="size-7 dark:hidden" />
            <IconMoon class="size-7 hidden dark:inline" />
          </HeroButton>
        </li>
        <li>
          <div class="mt-4 md:mt-0">
            <button class="bg-day-secondary rounded-xl px-4 py-3 text-xs"
              >BOOK NOW</button
            >
          </div>
        </li>
      </ul>
    </div>
  </nav>
</header>

<script>
  const themeToggle = document.getElementById("toggle-theme");
  const themetoggleMobile = document.getElementById("toggle-themeMobile");
  const htmlElement = document.documentElement;

  // Detectar el esquema de color del sistema y aplicarlo al cargar la página
  const preferredTheme = window.matchMedia("(prefers-color-scheme: dark)")
    .matches
    ? "dark"
    : "light";
  if (preferredTheme === "dark") {
    htmlElement.classList.add("dark");
  } else {
    htmlElement.classList.remove("dark");
  }

  // Escuchar cambios en el esquema de color del sistema
  window
    .matchMedia("(prefers-color-scheme: dark)")
    .addEventListener("change", (event) => {
      if (event.matches) {
        htmlElement.classList.add("dark");
      } else {
        htmlElement.classList.remove("dark");
      }
    });

  // Alternar el tema manualmente con el botón
  if (themeToggle) {
    themeToggle.addEventListener("click", () => {
      htmlElement.classList.toggle("dark");
    });
  }

  if (themetoggleMobile) {
    themetoggleMobile.addEventListener("click", () => {
      htmlElement.classList.toggle("dark");
    });
  }

  // //mover li
  // const lista = document.querySelector("ul");
  // if (lista) {
  //   const primerElemento = lista.querySelector("li:first-child");
  //   const penultimoElemento =
  //     lista.querySelectorAll("li")[lista.querySelectorAll("li").length - 2];
  //   if (primerElemento && penultimoElemento) {
  //     lista.insertBefore(primerElemento, penultimoElemento);
  //   }
  // }
</script>
